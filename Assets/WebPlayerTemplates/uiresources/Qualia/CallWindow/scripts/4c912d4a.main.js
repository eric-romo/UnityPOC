"use strict";function listenAs(a){peer=new Peer("ql-"+a,{key:"scyjcp8sd78pvi",debug:3}),peer.on("open",function(a){console.log("My peer ID is: "+a)}),peer.on("connection",function(a){a.on("data",function(a){console.log("Data: "+a)})}),peer.on("call",function(a){navigator.getUserMedia({video:!1,audio:!0},function(b){a.answer(b),a.on("stream",function(a){player.src=URL.createObjectURL(a),player.play()})},function(a){console.log("Failed to get local stream",a)})})}function call(a){var b=peer.connect("ql-"+a);b.on("open",function(){console.log("Connection Opened!"),b.send("Hello "+a+"!")}),navigator.getUserMedia({video:!1,audio:!0},function(b){var c=peer.call("ql-"+a,b);c.on("stream",function(a){var b=new Audio;b.src=URL.createObjectURL(a),b.play()})},function(a){console.log("Failed to get local stream",a)})}var Peer=window.Peer;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var callGavan=$("#call-gavan"),listenAsGavan=$("#listen-gavan"),callEric=$("#call-eric"),listenAsEric=$("#listen-eric"),peer,player=new Audio;listenAsEric.click(function(){listenAs("eric")}),listenAsGavan.click(function(){listenAs("gavan")}),callGavan.click(function(){call("gavan")}),callEric.click(function(){call("eric")});